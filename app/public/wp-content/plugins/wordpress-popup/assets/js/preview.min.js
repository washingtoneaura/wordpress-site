!function(e){"use strict";const t={moduleId:null,moduleData:null,$module:null,open(t,i,l=!1){if(void 0===t)return;const o="embedded"!==i&&"social_sharing"!==i||!e("#module-preview-inline-container").length?e("#module-preview-container"):e("#module-preview-inline-container");e.ajax({url:hustleVars.ajaxurl,type:"POST",data:{action:"hustle_preview_module",id:t,previewData:l}}).then((e=>{if(e.success){if(o.html(e.data.html),this.$module=o.find(".hustle-ui"),this.$module.find(".hustle-select2").length&&HUI.select2(),this.$module.find(".hustle-time").length&&HUI.timepicker(".hustle-time"),this.$module.find(".hustle-date").length){const{days_and_months:e}=hustleVars;HUI.datepicker(".hustle-date",e.days_full,e.days_short,e.days_min,e.months_full,e.months_short)}HUI.nonSharingSimulation(this.$module),HUI.inputFilled(),e.data.style&&o.append(e.data.style),e.data.script&&o.append(e.data.script),setTimeout((()=>HUI.maybeRenderRecaptcha(this.$module)),1e3)}return{id:t,data:e.data.module}}),(function(){})).then((({id:e,data:t})=>{this.moduleId=e,this.moduleData=t,this.showModule()}))},showModule(){const t="0"!==String(this.$module.data("close-delay"))&&this.$module.data("close-delay");"popup"===this.moduleData.module_type?HUI.popupLoad(this.$module[0],t):"slidein"===this.moduleData.module_type?(HUI.slideinLayouts(this.$module[0]),HUI.slideinLoad(this.$module[0],t),e(window).on("resize",(function(){this.$module&&HUI.slideinLayouts(this.$module[0])}))):(HUI.inlineResize(this.$module[0]),HUI.inlineLoad(this.$module[0]))},reloadModule(){if(this.$module.is(":visible")){let e=0;"popup"===this.moduleData.module_type?(HUI.popupClose(this.$module[0],0),e=2e3):"slidein"===this.moduleData.module_type&&(HUI.slideinClose(this.$module[0],0),e=500),setTimeout((()=>this.showModule()),e)}else this.showModule()},previewClosed(){this.$module=null,e("#module-preview-container").empty(),e("#module-preview-inline-container").empty()}};window.addEventListener("message",(function(e){if(e.origin!==window.location.origin||e.source!==window.parent)return;const i=e.data.action;"open"===i?t.open(e.data.moduleId,e.data.moduleType,e.data.previewData):"close"===i?t.previewClosed():"reload"===i&&t.reloadModule()}),!1),e("a:not(.hustle-button)").on("click",(function(e){e.preventDefault()}))}(jQuery);